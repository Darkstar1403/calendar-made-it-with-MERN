{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Branco/Desktop/React/react-09-calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Branco/Desktop/React/react-09-calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Swal from\"sweetalert2\";import{fetchWithToken}from\"../helpers/fetch\";import{prepareEvents}from\"../helpers/prepareEvents\";import{types}from\"../types/types\";export var eventStartAddNew=function eventStartAddNew(event){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState$auth,uid,name,resp,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_getState$auth=getState().auth,uid=_getState$auth.uid,name=_getState$auth.name;_context.prev=1;_context.next=4;return fetchWithToken('events/',event,'POST');case 4:resp=_context.sent;_context.next=7;return resp.json();case 7:body=_context.sent;if(body.ok){event.id=body.event.id;event.user={_id:uid,name:name};dispatch(eventAddNew(event));}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);Swal.fire('Error','Save error','error');console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};var eventAddNew=function eventAddNew(event){return{type:types.eventAddNew,payload:event};};export var eventSetActive=function eventSetActive(event){return{type:types.eventSetActive,payload:event};};export var eventClearActiveEvent=function eventClearActiveEvent(){return{type:types.eventClearActiveEvent};};var eventUpdated=function eventUpdated(event){return{type:types.eventUpdated,payload:event};};export var eventStartUpdate=function eventStartUpdate(event){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var resp,body;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetchWithToken(\"events/\".concat(event.id),event,'PUT');case 3:resp=_context2.sent;_context2.next=6;return resp.json();case 6:body=_context2.sent;if(body.ok){dispatch(eventUpdated(event));}else{Swal.fire('Error',body.msg,'error');}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function(_x3){return _ref2.apply(this,arguments);};}();};var eventDeleted=function eventDeleted(){return{type:types.eventDeleted};};export var eventStartDelete=function eventStartDelete(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var id,resp,body;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=getState().calendar.activeEvent.id;_context3.prev=1;_context3.next=4;return fetchWithToken(\"events/\".concat(id),{},'DELETE');case 4:resp=_context3.sent;_context3.next=7;return resp.json();case 7:body=_context3.sent;if(body.ok){dispatch(eventDeleted());}else{Swal.fire('Error',body.msg,'error');}_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};export var eventStartLoading=function eventStartLoading(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var resp,body,events;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetchWithToken('events/');case 3:resp=_context4.sent;_context4.next=6;return resp.json();case 6:body=_context4.sent;events=prepareEvents(body.events);dispatch(eventLoaded(events));_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function(_x6){return _ref4.apply(this,arguments);};}();};var eventLoaded=function eventLoaded(events){return{type:types.eventLoaded,payload:events};};export var eventLogout=function eventLogout(){return{type:types.eventLogout};};","map":{"version":3,"sources":["C:/Users/Branco/Desktop/React/react-09-calendar-app/src/actions/calendar.js"],"names":["Swal","fetchWithToken","prepareEvents","types","eventStartAddNew","event","dispatch","getState","auth","uid","name","resp","json","body","ok","id","user","_id","eventAddNew","fire","console","log","type","payload","eventSetActive","eventClearActiveEvent","eventUpdated","eventStartUpdate","msg","eventDeleted","eventStartDelete","calendar","activeEvent","eventStartLoading","events","eventLoaded","eventLogout"],"mappings":"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","sourcesContent":["import Swal from \"sweetalert2\";\r\nimport { fetchWithToken } from \"../helpers/fetch\";\r\nimport { prepareEvents } from \"../helpers/prepareEvents\";\r\nimport { types } from \"../types/types\";\r\n\r\nexport const eventStartAddNew = (event) =>{\r\n    return async(dispatch, getState) =>{\r\n        const {uid, name} = getState().auth;\r\n        try {\r\n            const resp = await fetchWithToken('events/', event, 'POST');\r\n            const body = await resp.json();\r\n            if(body.ok){\r\n                event.id = body.event.id;\r\n                event.user = {\r\n                    _id: uid,\r\n                    name: name\r\n                }\r\n                dispatch(eventAddNew(event));\r\n            }\r\n        } catch (error) {\r\n            Swal.fire('Error', 'Save error', 'error');\r\n            console.log(error);\r\n        }\r\n\r\n    }\r\n} \r\n\r\nconst  eventAddNew = (event) => ({\r\n    type: types.eventAddNew,\r\n    payload: event\r\n});\r\n\r\nexport const eventSetActive = (event) =>({\r\n    type: types.eventSetActive,\r\n    payload: event\r\n});\r\n\r\nexport const eventClearActiveEvent = () =>({\r\n    type: types.eventClearActiveEvent\r\n});\r\n\r\nconst eventUpdated = (event) =>({\r\n    type: types.eventUpdated,\r\n    payload: event\r\n});\r\n\r\nexport const eventStartUpdate = (event) =>{\r\n    return async(dispatch) =>{\r\n        try {\r\n\r\n            const resp = await fetchWithToken(`events/${event.id}`, event, 'PUT');\r\n            const body = await resp.json();\r\n\r\n            if(body.ok){\r\n                dispatch(eventUpdated(event));\r\n            }else{\r\n                Swal.fire('Error', body.msg, 'error');\r\n            }   \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}\r\n\r\nconst eventDeleted = () =>({\r\n    type: types.eventDeleted});\r\n\r\nexport const eventStartDelete = () =>{\r\n    return async(dispatch, getState) =>{\r\n        const {id} = getState().calendar.activeEvent;\r\n        try {\r\n            const resp = await fetchWithToken(`events/${id}`, {}, 'DELETE');\r\n            const body = await resp.json();\r\n\r\n            if(body.ok){\r\n                dispatch(eventDeleted());\r\n            }else{\r\n                Swal.fire('Error', body.msg, 'error');\r\n            }   \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}\r\n\r\nexport const eventStartLoading = () =>{\r\n    return async(dispatch) =>{\r\n        try {\r\n            const resp = await fetchWithToken('events/');\r\n            const body = await resp.json();\r\n            const events = prepareEvents(body.events);\r\n            dispatch(eventLoaded(events));\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n};\r\n\r\nconst eventLoaded = (events) =>({\r\n    type: types.eventLoaded,\r\n    payload: events\r\n});\r\n\r\nexport const eventLogout = () =>({type: types.eventLogout});\r\n\r\n"]},"metadata":{},"sourceType":"module"}