{"ast":null,"code":"import _defineProperty from\"C:/Users/Branco/Desktop/React/react-09-calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Branco/Desktop/React/react-09-calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Branco/Desktop/React/react-09-calendar-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{customStyles}from'../../helpers/center-modal-styles';import Modal from'react-modal';import DateTimePicker from'react-datetime-picker';import moment from'moment';import Swal from'sweetalert2';import{useDispatch,useSelector}from'react-redux';import{uiCloseModal}from'../../actions/ui';import{eventClearActiveEvent,eventStartAddNew,eventStartUpdate}from'../../actions/calendar';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";Modal.setAppElement('#root');var now=moment().minutes(0).seconds(0).add(1,'hours');var endDate=now.clone().add(1,'hours');var initialState={title:'',notes:'',start:now.toDate(),end:endDate.toDate()};export var CalendarModal=function CalendarModal(){var _useSelector=useSelector(function(state){return state.ui;}),modalOpen=_useSelector.modalOpen;var _useSelector2=useSelector(function(state){return state.calendar;}),activeEvent=_useSelector2.activeEvent;var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),titleValid=_useState2[0],setTitleValid=_useState2[1];var _useState3=useState(now.toDate()),_useState4=_slicedToArray(_useState3,2),dateStart=_useState4[0],setDateStart=_useState4[1];var _useState5=useState(endDate.toDate()),_useState6=_slicedToArray(_useState5,2),dateEnd=_useState6[0],setDateEnd=_useState6[1];var _useState7=useState(initialState),_useState8=_slicedToArray(_useState7,2),formValues=_useState8[0],setFormValues=_useState8[1];var title=formValues.title,notes=formValues.notes,start=formValues.start,end=formValues.end;useEffect(function(){if(activeEvent){setFormValues(activeEvent);}else{setFormValues(initialState);}},[activeEvent,setFormValues]);var handleInputChange=function handleInputChange(_ref){var target=_ref.target;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},target.name,target.value)));};var closeModal=function closeModal(){dispatch(uiCloseModal());dispatch(eventClearActiveEvent());setFormValues(initialState);};var onChangeStartDate=function onChangeStartDate(e){setDateStart(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{start:e}));};var onChangeEndDate=function onChangeEndDate(e){setDateEnd(e);setFormValues(_objectSpread(_objectSpread({},formValues),{},{end:e}));};var handleSubmitForm=function handleSubmitForm(e){e.preventDefault();var momentStart=moment(start);var momentEnd=moment(end);if(momentStart.isSameOrAfter(momentEnd)){return Swal.fire('Error','La fecha fin debe de ser mayor a la fecha de inicio','error');}if(!/^[a-zA-Z]\\w+((\\s+\\w+)+)?$/.test(title)){return setTitleValid(false);}if(activeEvent){dispatch(eventStartUpdate(formValues));}else{dispatch(eventStartAddNew(formValues));}setTitleValid(true);closeModal();};return/*#__PURE__*/_jsxs(Modal,{isOpen:modalOpen// onAfterOpen={afterOpenModal}\n,onRequestClose:closeModal,style:customStyles,closeTimeoutMS:200,className:\"modal\",overlayClassName:\"modal-fondo\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",activeEvent?'Editando evento':'Nuevo evento',\" \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitForm,className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora inicio\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:onChangeStartDate,value:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora fin\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:onChangeEndDate,value:dateEnd,minDate:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Titulo y notas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(titleValid?'is-valid':''),placeholder:\"T\\xEDtulo del evento\",name:\"title\",autoComplete:\"off\",value:title,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Una descripci\\xF3n corta\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Notas\",rows:\"5\",name:\"notes\",value:notes,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Informaci\\xF3n adicional\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-outline-primary w-100\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-save\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Guardar\"})]})]})]});};","map":{"version":3,"sources":["C:/Users/Branco/Desktop/React/react-09-calendar-app/src/components/calendar/CalendarModal.js"],"names":["React","useEffect","useState","customStyles","Modal","DateTimePicker","moment","Swal","useDispatch","useSelector","uiCloseModal","eventClearActiveEvent","eventStartAddNew","eventStartUpdate","setAppElement","now","minutes","seconds","add","endDate","clone","initialState","title","notes","start","toDate","end","CalendarModal","state","ui","modalOpen","calendar","activeEvent","dispatch","titleValid","setTitleValid","dateStart","setDateStart","dateEnd","setDateEnd","formValues","setFormValues","handleInputChange","target","name","value","closeModal","onChangeStartDate","e","onChangeEndDate","handleSubmitForm","preventDefault","momentStart","momentEnd","isSameOrAfter","fire","test"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { customStyles } from '../../helpers/center-modal-styles';\r\nimport Modal from 'react-modal';\r\nimport DateTimePicker from 'react-datetime-picker';\r\nimport moment from 'moment';\r\nimport Swal from 'sweetalert2';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { uiCloseModal } from '../../actions/ui';\r\nimport { eventClearActiveEvent, eventStartAddNew, eventStartUpdate } from '../../actions/calendar';\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst now = moment().minutes(0).seconds(0).add(1, 'hours');\r\nconst endDate = now.clone().add(1, 'hours');\r\n\r\nconst initialState ={\r\n    title: '',\r\n    notes : '',\r\n    start: now.toDate(),\r\n    end: endDate.toDate()\r\n};\r\n\r\nexport const CalendarModal = () => {\r\n\r\n    const {modalOpen} = useSelector(state => state.ui);\r\n    const {activeEvent} = useSelector(state => state.calendar);\r\n    const dispatch = useDispatch();\r\n    const [titleValid, setTitleValid] = useState(true);\r\n    const [dateStart, setDateStart] = useState(now.toDate());\r\n    const [dateEnd, setDateEnd] = useState(endDate.toDate());\r\n\r\n    const [formValues, setFormValues] = useState(initialState);\r\n\r\n    const {title, notes, start, end} = formValues;\r\n\r\n\r\n    useEffect(() => {\r\n        if(activeEvent){\r\n            setFormValues(activeEvent);\r\n        }\r\n        else{\r\n            setFormValues(initialState);\r\n        }\r\n    }, [activeEvent, setFormValues, ])\r\n\r\n    const handleInputChange = ({target}) =>{\r\n        setFormValues({...formValues,\r\n                        [target.name]: target.value});\r\n    }\r\n\r\n    const closeModal = () =>{\r\n        dispatch(uiCloseModal());\r\n        dispatch(eventClearActiveEvent());\r\n        setFormValues(initialState);\r\n    }\r\n\r\n    const onChangeStartDate = (e) =>{\r\n        setDateStart(e);\r\n        setFormValues({...formValues,\r\n                        start: e})\r\n    }\r\n\r\n    const onChangeEndDate = (e) =>{\r\n        setDateEnd(e);\r\n        setFormValues({...formValues,\r\n            end: e})\r\n    }\r\n\r\n    const handleSubmitForm = (e) =>{\r\n        e.preventDefault();\r\n        \r\n        const momentStart = moment(start);\r\n        const momentEnd = moment(end);\r\n\r\n        if( momentStart.isSameOrAfter(momentEnd)){\r\n           return Swal.fire('Error', 'La fecha fin debe de ser mayor a la fecha de inicio', 'error');  \r\n        }\r\n        if(!/^[a-zA-Z]\\w+((\\s+\\w+)+)?$/.test(title)){\r\n            return setTitleValid(false);\r\n        }\r\n        if(activeEvent){\r\n            dispatch(eventStartUpdate(formValues));\r\n        }\r\n        else{\r\n            dispatch(eventStartAddNew(formValues));\r\n        }\r\n        setTitleValid(true);\r\n        closeModal();\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={modalOpen}\r\n            // onAfterOpen={afterOpenModal}\r\n            onRequestClose={closeModal}\r\n            style={customStyles}\r\n            closeTimeoutMS={200}\r\n            className='modal'\r\n            overlayClassName='modal-fondo'\r\n        >\r\n            <h1> {(activeEvent)? 'Editando evento': 'Nuevo evento'} </h1>\r\n            <hr />\r\n            <form onSubmit={handleSubmitForm} className=\"container\">\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Fecha y hora inicio</label>\r\n                    <DateTimePicker\r\n                        onChange = {onChangeStartDate}\r\n                        value = {dateStart}\r\n                        className= 'form-control'\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Fecha y hora fin</label>\r\n                    <DateTimePicker\r\n                        onChange = {onChangeEndDate}\r\n                        value = {dateEnd}\r\n                        minDate={dateStart}\r\n                        className= 'form-control'\r\n                    />\r\n                </div>\r\n\r\n                <hr />\r\n                <div className=\"form-group\">\r\n                    <label>Titulo y notas</label>\r\n                    <input \r\n                        type=\"text\" \r\n                        className={`form-control ${(titleValid)?'is-valid':''}`}\r\n                        placeholder=\"Título del evento\"\r\n                        name=\"title\"\r\n                        autoComplete=\"off\"\r\n                        value={title}\r\n                        onChange = {handleInputChange}\r\n                    />\r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Una descripción corta</small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <textarea \r\n                        type=\"text\" \r\n                        className=\"form-control\"\r\n                        placeholder=\"Notas\"\r\n                        rows=\"5\"\r\n                        name=\"notes\"\r\n                        value={notes}\r\n                        onChange = {handleInputChange}\r\n                    ></textarea>\r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Información adicional</small>\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-outline-primary w-100\"\r\n                >\r\n                    <i className=\"far fa-save\"></i>\r\n                    <span> Guardar</span>\r\n                </button>\r\n\r\n            </form>\r\n        </Modal>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}